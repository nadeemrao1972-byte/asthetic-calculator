!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="5d813fb8-3a8e-4e96-88f6-9d06113f5c57",e._sentryDebugIdIdentifier="sentry-dbid-5d813fb8-3a8e-4e96-88f6-9d06113f5c57")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"ef5ff8f4"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3082],{5278:(e,t,n)=>{"use strict";function r(){var e,t,n={promise:new Promise(function(n,r){e=n,t=r}),resolve:function(t){n.isFulfilled=!0,e(t)},reject:function(e){n.isFulfilled=!0,t(e)},isFulfilled:!1};return n}n.d(t,{A:()=>r})},7659:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>o,gT:()=>a});var r=n(62178);function o(){return new r.EventEmitter}function a(e,t){return function(n){return e.on(t,n),function(){e.off(t,n)}}}},16732:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(86105),o=n(5278);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{wait:0},n=null,a=null,i=null,s=null;if(t.wait<0)throw Error("wait must be 0 or more");if(t.maxWait){if(t.maxWait<0)throw Error("maxWait must be 0 or more");if(t.maxWait<t.wait)throw Error("maxWait must be higher than wait")}function c(){a&&clearTimeout(a),a=null,s=null,n=null,i=null}function u(){if(!n||!a)throw Error("Expected to call debounced function once before flushing");var t=n,o=s;return c(),e.apply(void 0,(0,r._)(o)).then(function(e){return t.resolve(e),e}).catch(function(e){throw t.reject(e),e})}return Object.assign(function(){for(var e=arguments.length,r=Array(e),c=0;c<e;c++)r[c]=arguments[c];if(n){if(!a)throw Error("Did not expect to have deferred and no timeout");clearTimeout(a)}else n=(0,o.A)(),i=Date.now();return s=r,a=setTimeout(function(){u()},function(){if(!t.maxWait)return t.wait;if(!i)throw Error("Expected scheduledAt to be a set when getting wait");var e=Date.now()-i;return Math.min(t.maxWait-e,t.wait)}()),n.promise},{isScheduled:function(){return!!(n&&a)},cancel:function(){if(!a||!n)throw Error("Expected to call debounced function once before cancelling");var e=n;c(),e.reject(Error("Debounced function cancelled"))},flush:u})}},27172:(e,t,n)=>{"use strict";n.d(t,{E:()=>u});var r=n(29935),o=n(82643),a=n(90629),i=n(95793),s=n(58631),c=n(95570);function u(){return(0,r._)(function(){var e,t,n;return(0,o.YH)(this,function(r){switch(r.label){case 0:return e="0.0.1990",window.location.search.includes("debug=1")&&"string"==typeof(t=s.A.get("pid2Version"))&&(c.log("using pid2 version from localStorage",t),e=t),[3,2];case 1:return n=r.sent(),null!=e||(e=null!=n?n:"dev"),[2,e];case 2:if(!e)throw Error("expected PID2_VERSION to be set in prod");return(0,i.nY)(e),a.NA("pid2Version",e),[2,e]}})})()}},29487:(e,t,n)=>{"use strict";n.d(t,{K:()=>r.KN,s:()=>o});var r=n(35862),o=function(e){return e.CONNECTION_STATE_CHANGE="CONNECTION_STATE_CHANGE",e.PORT_OPEN="PORT_OPEN",e.PORT_CLOSE="PORT_CLOSE",e.TOAST="TOAST",e}({})},47676:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>l,mU:()=>f,ub:()=>c});var r=n(62019),o=n(37743),a=n(1833),i=n(12694),s=n(89264),c=function(e){return e.NotFound="NotFound",e.NotAllowed="NotAllowed",e.ConcurrentReplLimit="ConcurrentReplLimit",e.LanguageTokenDenied="LanguageTokenDenied",e.RequiresRefresh="RequiresRefresh",e.CrosisChannel="CrosisChannel",e}({}),u={"repl not found":"NotFound","not allowed to run at this time":"NotAllowed","language tokens are only for logged out people.":"LanguageTokenDenied","user is required to refresh":"RequiresRefresh","channel with name ot":"CrosisChannel","cannot send any more commands after a close request on channel for ot":"CrosisChannel"};function l(e){var t=!0,n=!1,r=void 0;try{for(var o,a=Object.entries(u)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var s=(0,i._)(o.value,2),c=s[0],l=s[1];if(e.message.toLowerCase().includes(c))return l}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return null}var f=function(e){function t(e){return(0,o._)(this,t),(0,r._)(this,t,["user is required to refresh: "+e])}return(0,a._)(t,e),t}((0,s._)(Error))},57221:(e,t,n)=>{"use strict";n.d(t,{KN:()=>b.K,Kw:()=>_,wF:()=>y,XQ:()=>C,Ay:()=>A});var r=n(29935),o=n(17844),a=n(93629),i=n(17459),s=n(86105),c=n(82643),u=n(90629),l=n(8696),f=n.n(l),d=n(35862),p=n(73920),g=n(7659),h=n(87380),v=n(2916);function m(e){return(0,r._)(function(e){var t,n,r,o;return(0,c.YH)(this,function(a){return t=e.client,n=e.args,r=e.env,o=e.noUserEnv,[2,new Promise(function(e){var a=t.openChannel({service:"exec"},function(t){var i=t.channel,s="";i.onCommand(function(e){e.output&&(s+=e.output)}),i.request({exec:{args:n,env:r,noUserEnv:null!=o&&o}}).then(function(t){return t.channelClosed?void e({error:"Channel closed",output:s||null}):("open"===i.status&&a(),t.error)?void e({error:t.error,output:s||null}):void e({output:s,error:null})})})})]})}).apply(this,arguments)}var w=n(47676),b=n(29487),E=n(95570),y=5900,C=5905,_=5906,x=1e-4>=Math.random();function S(e){return Math.min(1e3*Math.pow(2,e),6e4)+Math.floor(500*Math.random())}function A(e){var t=e.fetchConnectionMetadata,n=e.getOverrideClusterMetadata,l=e.getDotdevUrl,C=e.logger,_=e.onUnrecoverableError,A=e.performance,T=e.preFetchConnectionMetadata,M=e.registerReconnectionMonitor,O=e.unregisterReconnectionMonitor,R=e.crosisTimeout,N=e.crosisWebSocketClass,k=e.traceCtx,P=e.getPid2Version,L=(0,g.Ay)();L.setMaxListeners(1e3);var D=null,U=new d.Kj;U.setUnrecoverableErrorHandler(_),U.onDebugLog(function(e){if("breadcrumb"===e.type){t="container:state"===e.message?{containerState:e.data}:"data"in e?e.data:void 0,u.ZQ({category:"crosisV6",message:e.message,data:t});var t,n={replid:null==D?void 0:D.repl.id,language:null==D?void 0:D.repl.language};switch(e.message){case"timeout:hit":C.error("crosis connect timeout",n);break;case"onUnrecoverableError":var r=(0,o._)({errorMessage:e.data.message},n);C.error("crosis unrecoverable error",r);break;case"status:retrying":var a=e.data,s=a.error,c=(0,i._)(a,["error"]),l=(0,o._)({errorMessage:s.message},n,c);C.error("crosis retrying",l);break;case"status:connecting":case"status:reconnecting":var f=e.message.split(":")[1];C.info("crosis ".concat(f),(0,o._)({},n,"data"in e?e.data:void 0));break;case"websocket:polling fallback":C.info("crosis polling fallback",(0,o._)({},n))}}});var I=window.location.search.includes("debug=1");I&&U.onDebugLog(function(e){"log"===e.type&&E.log("in"===e.log.direction?"pid1 --\x3e web":"pid1 <-- web",e.log.channel.service,JSON.stringify({cmd:e.log.cmd,channel:e.log.channel},null,2))});var B=function(e){var t=void 0;if(void 0!==k&&e.service){var n="";"string"==typeof e.service?n=e.service:D&&(n=e.service(D)),n&&(t=(0,h.Ux)(k,"container.".concat(n,".openChannel")).span)}return t};return{logger:C,performance:A,onPortOpened:function(e){return L.on(b.s.PORT_OPEN,e),function(){L.removeListener(b.s.PORT_OPEN,e)}},onPortClosed:function(e){return L.on(b.s.PORT_CLOSE,e),function(){L.removeListener(b.s.PORT_CLOSE,e)}},onToast:function(e){return L.on(b.s.TOAST,e),function(){L.removeListener(b.s.TOAST,e)}},onConnectionStateChanged:function(e){return U.onConnectionStateChange(e)},connect:function(e){var u=this,l=e.context,g=e.fetchConnectionMetadataExtras,h=e.getMinimumRetryDelayMs,m=(0,i._)(e,["context","fetchConnectionMetadataExtras","getMinimumRetryDelayMs"]);U.getConnectionState()!==b.K.DISCONNECTED&&U.close(),D=l,M(function(){U.getConnectionState()===b.K.DISCONNECTED&&u.connect((0,o._)({context:l,fetchConnectionMetadataExtras:g,getMinimumRetryDelayMs:h},m))},function(){U.getConnectionState()!==b.K.DISCONNECTED&&u.close({expectReconnect:!0})});var O=function(e){var t=e.chan0,n=e.gurl,a=e.isFirst;return(0,r._)(function(){var e,r,i,s;return(0,c.YH)(this,function(c){switch(c.label){case 0:if(e=this,"open"!==t.status)return[2];return r=C.timeStart({gurl:n}),i=setTimeout(function(){C.error("ping with no response",{gurl:n}),e.connect((0,o._)({context:l,fetchConnectionMetadataExtras:g,getMinimumRetryDelayMs:h},m))},3e4),[4,t.request({ping:{}})];case 1:if(s=c.sent().channelClosed,clearTimeout(i),s)return[2];return a?r("latency to pid1",{type:"startup"}):x&&r("latency to pid1",{type:"periodic"}),setTimeout(function(){return O({chan0:t,gurl:n,isFirst:!1})},1e3),[2]}})}).call(u)},k={getNextRetryDelayMs:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Math.max(S.apply(void 0,(0,s._)(t)),h())},context:l,reuseConnectionMetadata:!0,fetchConnectionMetadata:function(e){return(0,r._)(function(){var r,i,s,u,f,h;return(0,c.YH)(this,function(c){switch(c.label){case 0:if("function"!=typeof T)return[3,2];return[4,T()];case 1:c.sent(),c.label=2;case 2:if("function"!=typeof n)return[3,4];return[4,n()];case 3:return i=c.sent(),[3,5];case 4:i=null,c.label=5;case 5:if(r=i,e.aborted)return[2,{error:d.wd.Aborted}];s=C.timeStart({hasCustomFetch:!!m.fetchConnectionMetadata}),c.label=6;case 6:if(c.trys.push([6,12,,13]),!m.fetchConnectionMetadata)return[3,8];return[4,m.fetchConnectionMetadata()];case 7:return u=c.sent(),[3,11];case 8:return f={asViewer:l.asViewer,replId:l.repl.id,isLoggedIn:!!l.currentUser},[4,P()];case 9:return[4,t.apply(void 0,[o._.apply(void 0,[(f.requestedPid2Version=c.sent(),f.format=p.api.token.ReplToken.WireFormat.PROTOBUF,f.overrideClusterMetadata=r,f),g])])];case 10:u=c.sent(),c.label=11;case 11:return[3,13];case 12:if(h=c.sent(),e.aborted)return[2,{error:d.wd.Aborted}];switch(h&&h.statusCode){case 400:case 401:case 403:throw new w.mU(h.statusCode);case 408:case 409:case 429:case 500:case 502:case 503:case 504:case 526:return C.warn("Retriable error while fetching connection metadata",{statusCode:h.statusCode,originalMessage:h.message}),[2,{error:d.wd.Retriable}]}throw h;case 13:if(e.aborted)return[2,{error:d.wd.Aborted}];return I&&E.log("connecting",u),s("fetched connection metadata"),[2,(0,a._)((0,o._)({},u),{error:null})]}})})()}};R&&R>0&&(k.timeout=R),N?k.WebSocketClass=N:"undefined"==typeof WebSocket&&(k.WebSocketClass=f());var B=A.now(),H=0;U.open(k,function(e){var t,n=e.channel;I&&E.log("connected",{replId:l.repl.id});var r=n.onCommand(function(e){switch(e.body){case"portOpen":if(!e.portOpen)throw Error("portOpen only handles portOpen commands");var t=!!e.portOpen.forwarded,n=e.portOpen,r=n.address,o=n.cmdline,a=n.cgroup,i=n.pid,s=e.portOpen.port||0;if(8284===s||5901===s)return;L.emit(b.s.PORT_OPEN,{port:s,externalPort:e.portOpen.externalPort,isVnc:s===y,isForwarded:t,address:r,cmdline:o,cgroup:a,pid:i});break;case"portClose":if(!e.portClose)throw Error("portClose only handles portClose commands");var c=e.portClose.port||0,u=e.portClose.address;if(8284===c||5901===c)return;L.emit(b.s.PORT_CLOSE,{port:c,externalPort:e.portClose.externalPort,isVnc:c===y,address:u});break;case"protocolError":_(new v.A("goval panic").setExtra("message",null!=(f=null==(l=e.protocolError)?void 0:l.text)?f:"protocol error"));break;case"toast":var l,f,d,p=null==(d=e.toast)?void 0:d.text;if(!p)break;L.emit(b.s.TOAST,p)}});O({chan0:n,gurl:null==(t=U.getConnectionMetadata())?void 0:t.gurl,isFirst:!0}),window.v6ws=U.ws;var o=A.now()-B;return C.info("connected to pid1",{time:o,reconnectCount:H,replid:l.repl.id,language:l.repl.language}),function(e){var t=e.willReconnect;if(r(),!t){D=null;return}B=A.now(),H++}})},openChannel:function(e,t){var n=B(e);return U.openChannel(e,function(e){var r=e.channel.onCommand(function(e){if("protocolError"===e.body){var t,n;_(new v.A("goval panic").setExtra("message",null!=(n=null==(t=e.protocolError)?void 0:t.text)?n:"protocol error"))}}),o=t(e);return void 0!==n&&n.end(),function(e){o&&o(e),r&&r()}})},getConnectionState:function(){return U.getConnectionState()},exec:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r._)(function(){return(0,c.YH)(this,function(e){return[2,m({client:U,args:t})]})})()},execImmediately:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r._)(function(){return(0,c.YH)(this,function(e){return[2,m({client:U,args:t,noUserEnv:!0})]})})()},execWithEnv:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return(0,r._)(function(){return(0,c.YH)(this,function(t){return[2,m({client:U,args:n,env:e})]})})()},close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{expectReconnect:!1};U.getConnectionState()!==b.K.DISCONNECTED&&U.close(e)},destroy:function(){U.destroy(),L.removeAllListeners(),O()},client:function(){return U},focus:function(){var e=U.getChannel(0);e&&e.send({focused:{}})},getConnectionMetadata:function(){return U.getConnectionMetadata()},getContext:function(){return D},getDotdevUrl:function(){var e=U.getConnectionMetadata();if(!e||U.getConnectionState()!==b.K.CONNECTED)throw Error("Cannot get dot dev url when container is not connected");return l(e)},unrecoverableError:function(e,t){U.destroy(),L.removeAllListeners(),_(t?v.A.wrap(e).setExtras(t):e)}}}},71696:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>h,KN:()=>g.K});var r=n(29935),o=n(82643),a=n(40185),i=n.n(a),s=n(62325),c=n(57221),u=n(95793),l=n(95678),f=n(27172),d=n(93144),p=n(72951),g=n(29487);function h(e){var t,n,a=e.onUnrecoverableError,g=e.ctx,h={register:function(e,r){return n(),window.addEventListener("online",e),window.addEventListener("offline",r),t=function(){window.removeEventListener("online",e),window.removeEventListener("offline",r)},n},unregister:n=function(){t&&(t(),t=void 0)}},m=h.register,w=h.unregister;return(0,c.Ay)({fetchConnectionMetadata:d.A,getOverrideClusterMetadata:p.A,getDotdevUrl:v,logger:u.vF,onUnrecoverableError:a,performance:window.performance,preFetchConnectionMetadata:function(){return(0,r._)(function(){var e;return(0,o.YH)(this,function(t){switch(t.label){case 0:if(window.performance.clearMarks(s.pY.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(s.pY.fetchConnectionMetadataPageInvisibleEnd),e=u.vF.timeStart(),window.performance.mark(s.pY.fetchConnectionMetadataPageInvisibleStart),"/migrateReplToNix"===i().pathname)return[3,2];return[4,(0,l.w)()];case 1:t.sent(),t.label=2;case 2:window.performance.mark(s.pY.fetchConnectionMetadataPageInvisibleEnd),e("page visible fetch connection metadata"),t.label=3;case 3:return[2]}})})()},registerReconnectionMonitor:m,unregisterReconnectionMonitor:w,traceCtx:g,getPid2Version:f.E})}function v(e){return e.dotdevHostname.endsWith(".localhost")?"http://".concat(e.dotdevHostname,":8081"):"https://".concat(e.dotdevHostname)}},72951:(e,t,n)=>{"use strict";n.d(t,{A:()=>c,x:()=>s});var r=n(29935),o=n(82643),a=n(58631),i=n(95570);function s(e){var t=function(e){try{t=new URL(e)}catch(e){return i.log("failed to parse gurl"),i.error(e),null}var t,n={secure:!1,port:""+t.port,host:t.hostname};return"wss:"===t.protocol?n.secure=!0:"ws:"!==t.protocol&&i.log(e,"Expected gurl protocol to be ws or wss, assuming insecure connection"),n.port||(n.port=n.secure?"443":"80"),n}(e);if(!t)return null;var n=t.secure,r=t.host,o=t.port;return"repl.it"===r||"gp-v2.replit.com"===r||"eval.replit.com"===r?null:{id:"development",gurl:"ws".concat(n?"s":"","://").concat(r,":").concat(o),conmanURL:"http".concat(n?"s":"","://").concat(r,":").concat(o),proxy:"http".concat(n?"s":"","://").concat(r.replace("eval","proxy"),":").concat(o)}}function c(){return(0,r._)(function(){var e;return(0,o.YH)(this,function(t){switch(t.label){case 0:return[4,(0,r._)(function(){return(0,o.YH)(this,function(e){return a.A.get("gurl")?(i.log("Getting gurl from localstorage"),[2,a.A.get("gurl")]):[2,null]})})()];case 1:if(!(e=t.sent()))return[2,null];return[2,s(e)]}})})()}},81085:()=>{},87102:(e,t,n)=>{"use strict";n.d(t,{$J:()=>m,uq:()=>h,yk:()=>v});var r=n(62019),o=n(37743),a=n(1833),i=n(86105),s=n(89264),c=n(91061),u=n(74651),l=n(16128),f=n(18497),d=n.n(f),p=n(57764),g=n.n(p);c.NZ("uuid",function(e){return g()(e)}),c.NZ("date-time",function(e){return d()(e)});var h=function(e){return u.ZU.Optional(u.ZU.Union([u.ZU.Null(),e]))},v=function(e){function t(e){var n;return(0,o._)(this,t),(n=(0,r._)(this,t)).name="Schema validation error",n.message=e.map(function(e){return"".concat(e.path,": ").concat(e.message)}).join("\n"),n.issues=e,n}return(0,a._)(t,e),t}((0,s._)(Error));function m(e,t){return new v((0,i._)(l.I(e,t)))}},87380:(e,t,n)=>{"use strict";n.d(t,{Ux:()=>f,ce:()=>u,eT:()=>l,mY:()=>d,rA:()=>s});var r=n(29935),o=n(82643),a=n(46692),i=n(99784),s="repl.it-web",c=a.u.getTracer(s);function u(e,t,n){return(0,r._)(function(){var r,i;return(0,o.YH)(this,function(o){switch(o.label){case 0:r=c.startSpan(t,void 0,e),i=a.u.setSpan(e,r),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,n(i)];case 2:return[2,o.sent()];case 3:return r.end(),[7];case 4:return[2]}})})()}function l(e,t,n){return(0,r._)(function(){var r,i;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(void 0!==e)return[3,2];return[4,n()];case 1:return[2,o.sent()];case 2:r=c.startSpan(t,void 0,e),i=a.u.setSpan(e,r),o.label=3;case 3:return o.trys.push([3,,5,6]),[4,n(i,r)];case 4:return[2,o.sent()];case 5:return r.end(),[7];case 6:return[2]}})})()}function f(e,t){var n=c.startSpan(t,void 0,e),r=a.u.setSpan(e,n);return{span:n,childCtx:r}}function d(e){var t={};return new i.lm().inject(e,t,{set:function(e,t,n){e[t]=n}}),t}},89943:(e,t,n)=>{"use strict";n.d(t,{s:()=>a});var r=n(11797),o=n(49069);function a(e,t){var n=[],a=!0,i=!1,s=void 0;try{for(var c,u=(0,r.Ui)(e.toString(),t.toString())[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value,f=l.fromA,d=l.fromB,p=l.toA,g=l.toB;f===p&&n.push({from:f,insert:t.slice(d,g)}),d===g&&n.push({from:f,to:p,insert:""}),f!==p&&d!==g&&n.push({from:f,to:p,insert:t.slice(d,g)})}}catch(e){i=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(i)throw s}}return o.VR.of(n,e.length)}},93144:(e,t,n)=>{"use strict";n.d(t,{A:()=>function e(t){return(0,r._)(function(t){var n,r,s,l,f,d,p,g,h,v,_,x,S;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(n=t.replId,r=t.isLoggedIn,s=t.overrideClusterMetadata,l=t.requestedPid2Version,f=t.format,d=t.asViewer,p=t.retry,g=t.before,!b.V)throw Error("Expected apollo client");if(h=!!(c().query.lite||c().query.embed),v={url:"/data/repls/".concat(n,"/get_connection_metadata"),overrideClusterMetadata:s,requestedPid2Version:l,format:null!=f?f:u.api.token.ReplToken.WireFormat.PROTOBUF,clientVersion:"ef5ff8f4",hCaptchaSiteKey:y.lh,isEmbed:h,retry:p||0,asViewer:d,before:g},r||h&&!C)return[3,8];i.label=1;case 1:i.trys.push([1,7,,8]),i.label=2;case 2:return i.trys.push([2,4,,6]),[4,(0,w.hw)({action:"genReplToken"})];case 3:return x=i.sent(),[3,6];case 4:return i.sent(),[4,(0,y.Ay)()];case 5:return _=i.sent(),[3,6];case 6:return[2,m((0,a._)((0,o._)({},v),{captcha:_,recaptchaToken:x}))];case 7:return S=i.sent(),E.vF.error("Goval connection failure",{errorMessage:S&&S.message||"unidentified failure",replid:n,reason:"captcha",context:"services"}),[2,e({replId:n,overrideClusterMetadata:s,retry:(p||0)+1,requestedPid2Version:l,format:f,isLoggedIn:r,asViewer:d,before:g})];case 8:return[2,m(v)]}})}).apply(this,arguments)}});var r=n(29935),o=n(17844),a=n(93629),i=n(82643),s=n(40185),c=n.n(s),u=n(73920),l=n(17459),f=n(22531),d=n(80478),p=n(5053),g=n.n(p),h=n(2916),v=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;function m(e){return(0,r._)(function(){var t,n,r,a,s,c,u,p,m;return(0,i.YH)(this,function(i){switch(i.label){case 0:t=e.url,n=(0,l._)(e,["url"]),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,g()(t,{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},method:"post",body:JSON.stringify(n)})];case 2:return r=i.sent(),[3,4];case 3:throw(a=i.sent()).statusCode||(a.statusCode=504),a;case 4:if(c=(s=r.headers.get("content-type"))&&s.includes("application/json"),r.ok)return[3,9];if(!c)return[3,6];return[4,r.json()];case 5:return u=i.sent().message,[3,8];case 6:return[4,r.text()];case 7:u=i.sent(),i.label=8;case 8:throw new h.A(u||r.statusText).setExtras((0,o._)({url:t},n)).setStatusCode(r.status);case 9:if(c)return[3,11];return[4,r.text()];case 10:throw p=i.sent(),new h.A("Expected JSON response for connection metadata").setExtras((0,o._)({contentType:s,statusText:r.statusText,response:p,url:t},n)).setStatusCode(r.status);case 11:return[4,r.json()];case 12:var w;if(!((w=m=i.sent())&&(void 0===w?"undefined":(0,f._)(w))==="object"&&"token"in w&&"string"==typeof w.token&&"gurl"in w&&"string"==typeof w.gurl&&"conmanURL"in w&&"string"==typeof w.conmanURL&&("dotdevHostname"in w&&"string"==typeof w.dotdevHostname||(d.vF.error("Lore returned an incomplete metadata",{res:w}),w.dotdevHostname=""),1)))throw new h.A("Invalid format for connection metadata response").setExtras((0,o._)({connectionMetadata:m,url:t},n));if(!(m.token.startsWith("v2.public.")||v.test(m.token)))throw new h.A("Expected token to be PASETO- or base64-encoded").setExtras((0,o._)({connectionMetadata:m,url:t},n));return[2,m]}})})()}var w=n(24517),b=n(62449),E=n(95793),y=n(89117),C=!!n(64946).env.CAPTCHA_EMBEDS},95678:(e,t,n)=>{"use strict";n.d(t,{T:()=>c,w:()=>s});var r=n(29935),o=n(12694),a=n(82643),i=n(21462);function s(){return(0,r._)(function(){return(0,a.YH)(this,function(e){return"undefined"!=typeof document&&document.hidden?[2,new Promise(function(e){var t=function(){document.hidden||(document.removeEventListener("visibilitychange",t),e())};document.addEventListener("visibilitychange",t)})]:[2]})})()}function c(){var e=(0,o._)((0,i.useState)(!1),2),t=e[0],n=e[1];return(0,i.useEffect)(function(){var e=function(){n(!document.hidden)};return document.addEventListener("visibilitychange",e),e(),function(){document.removeEventListener("visibilitychange",e)}},[]),t}},98565:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(37743),o=n(48122),a=n(53847),i=n(22531),s=n(60594).Buffer,c=function(){function e(t,n){if((0,r._)(this,e),this.asEncoding={},this.asBuffer=null,n&&"string"==typeof t)this.asEncoding[n]=t;else if(null==t)this.asBuffer=s.alloc(0);else if((0,a._)(t,s))this.asBuffer=t;else if("string"==typeof t)this.asEncoding.utf8=t;else if((0,a._)(t,ArrayBuffer))this.asBuffer=s.from(t);else{if((0,a._)(t,e))return t;(0,a._)(t,Uint8Array)?this.asBuffer=s.from(t):(void 0===t?"undefined":(0,i._)(t))==="object"&&"object"===(0,i._)(t.asEncoding)&&null!==t.asEncoding&&((0,a._)(t.asBuffer,s)||null===t.asBuffer)&&(this.asBuffer=t.asBuffer||null,"string"==typeof t.asEncoding.base64&&(this.asEncoding={base64:t.asEncoding.base64}),"string"==typeof t.asEncoding.utf8&&(this.asEncoding={utf8:t.asEncoding.utf8}))}}var t=e.prototype;return t.toString=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"utf8";if(void 0!==this.asEncoding[e])return this.asEncoding[e];var t=this.toBuffer().toString(e);return this.asEncoding[e]=t,t},t.toJSON=function(){return{asEncoding:{base64:this.toString("base64")},asBuffer:null}},t.toBuffer=function(){if(this.asBuffer)return this.asBuffer;for(var e in this.asEncoding){var t=this.asEncoding[e];if("string"==typeof t){var n=s.from(t,e);return this.asBuffer=n,n}}return this.asBuffer=s.alloc(0),this.asBuffer},e.from=function(t,n){return new e(t,n)},e.isBuffer=function(t){return(0,a._)(t,e)},(0,o._)(e,[{key:"length",get:function(){return void 0!==this.asEncoding.utf8?this.asEncoding.utf8.length:this.toBuffer().length}}]),e}()}}]);
//# sourceMappingURL=3082-4bba1af06dc69116.js.map